{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/whosin/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Projects/whosin/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Projects/whosin/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Projects/whosin/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Projects/whosin/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{Button,Spinner}from'react-bootstrap';import useValidator from'./useValidator';import{adminLogin}from'../Services/userapi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(props){var history=useHistory();var _useValidator=useValidator(),_useValidator2=_slicedToArray(_useValidator,2),validator=_useValidator2[0],showValidationMessage=_useValidator2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({email:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];useEffect(function(){var storedData=JSON.parse(localStorage.getItem(\"MyUser\"));if(storedData){history.push(\"/\");}else{history.push(\"/login\");}},[]);// eslint-disable-line react-hooks/exhaustive-deps\nvar inputVal=function inputVal(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},name,value)));};//axios.post(\"http://localhost:9001/user/login\", user).then((res) => { })\nvar loginUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!validator.allValid()){_context.next=9;break;}setLoading(true);_context.next=5;return adminLogin(user);case 5:res=_context.sent;if(res.data.message===\"Login Successfully\"){alert(res.data.message);props.updateUserinlocalStorage(res.data.user);setLoading(false);history.push(\"/\");}else{setLoading(false);alert(res.data.message);}_context.next=10;break;case 9:showValidationMessage(true);case 10:case\"end\":return _context.stop();}}},_callee);}));return function loginUser(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){loginUser(e);},children:/*#__PURE__*/_jsx(\"div\",{className:\"outsider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user_img\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"newinputval\",type:\"text\",value:user.email,placeholder:\"Enter your username\",name:\"email\",onChange:inputVal}),validator.message('email',user.email,'required',{className:'text-danger spacepart',messages:{required:\"Username is required\"}}),/*#__PURE__*/_jsx(\"input\",{className:\"newinputval\",type:\"password\",value:user.password,autoComplete:\"on\",placeholder:\"Enter your password\",name:\"password\",onChange:inputVal}),validator.message('password',user.password,'required|min:4|max:12',{className:'text-danger spacepart',messages:{required:\"Password is required\"}}),!loading?/*#__PURE__*/_jsx(Button,{type:\"submit\",style:{marginTop:'15px',width:'auto',background:'rgba(237, 28, 36, 1)',borderRadius:'3px',border:'0 none',padding:'15px 42px',fontSize:'16px',fontWeight:'500',lineHeight:'16px',cursor:'pointer',textTransform:'capitalize',color:'rgba(255, 255, 255, 1)'},children:\"Login\"}):/*#__PURE__*/_jsxs(Button,{variant:\"primary\",style:{marginTop:'15px',width:'auto',background:'rgba(237, 28, 36, 1)',borderRadius:'3px',border:'0 none',padding:'15px 42px',fontSize:'16px',fontWeight:'500',lineHeight:'16px',cursor:'pointer',textTransform:'capitalize',color:'rgba(255, 255, 255, 1)'},disabled:true,children:[/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"grow\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}),\"Loading...\"]}),/*#__PURE__*/_jsx(\"br\",{})]})})})});};export default Login;","map":{"version":3,"sources":["C:/Projects/whosin/Frontend/src/components/Login.js"],"names":["React","useState","useEffect","useHistory","Button","Spinner","useValidator","adminLogin","Login","props","history","validator","showValidationMessage","loading","setLoading","email","password","user","setUser","storedData","JSON","parse","localStorage","getItem","push","inputVal","e","target","name","value","loginUser","preventDefault","allValid","res","data","message","alert","updateUserinlocalStorage","className","messages","required","marginTop","width","background","borderRadius","border","padding","fontSize","fontWeight","lineHeight","cursor","textTransform","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Button, Spinner } from 'react-bootstrap'\r\nimport useValidator from './useValidator'\r\nimport { adminLogin } from '../Services/userapi';\r\nconst Login = (props) => {\r\n    const history = useHistory();\r\n    const [validator, showValidationMessage] = useValidator()\r\n    const [loading, setLoading] = useState(false);\r\n    const [user, setUser] = useState({\r\n        email: \"\",\r\n        password: \"\"\r\n    })\r\n    useEffect(() => {\r\n        const storedData = JSON.parse(localStorage.getItem(\"MyUser\"));\r\n        if (storedData) {\r\n            history.push(\"/\");\r\n        } else {\r\n            history.push(\"/login\");\r\n        }\r\n    }, [])  // eslint-disable-line react-hooks/exhaustive-deps\r\n    const inputVal = (e) => {\r\n        const { name, value } = e.target;\r\n        setUser({\r\n            ...user,\r\n            [name]: value\r\n        })\r\n    }\r\n    //axios.post(\"http://localhost:9001/user/login\", user).then((res) => { })\r\n    const loginUser = async (e) => {\r\n        e.preventDefault();\r\n        if (validator.allValid()) {\r\n            setLoading(true);\r\n            let res = await adminLogin(user);\r\n            if (res.data.message === \"Login Successfully\") {\r\n                alert(res.data.message)\r\n                props.updateUserinlocalStorage(res.data.user);\r\n                setLoading(false);\r\n                history.push(\"/\");\r\n            } else {\r\n                setLoading(false);\r\n                alert(res.data.message)\r\n            }\r\n        } else {\r\n            showValidationMessage(true);\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <form onSubmit={(e) => { loginUser(e) }}>\r\n                {/* onChange={(e)=>{setUser({...user, f_name: e.target.value})}} */}\r\n                <div className=\"outsider\">\r\n                    <div className=\"login\">\r\n                        <div className=\"user_img\"></div>\r\n                        <br />\r\n\r\n                        <input className=\"newinputval\" type=\"text\" value={user.email} placeholder=\"Enter your username\" name=\"email\" onChange={inputVal} />\r\n                        {/**********   This is where the magic happens     ***********/}\r\n                        {validator.message('email', user.email, 'required', {\r\n                            className: 'text-danger spacepart',\r\n                            messages: {\r\n                                required: \"Username is required\"\r\n                            }\r\n                        })}\r\n\r\n                        <input className=\"newinputval\" type=\"password\" value={user.password} autoComplete=\"on\" placeholder=\"Enter your password\" name=\"password\" onChange={inputVal} />\r\n                        {validator.message('password', user.password, 'required|min:4|max:12', {\r\n                            className: 'text-danger spacepart',\r\n                            messages: {\r\n                                required: \"Password is required\"\r\n                            }\r\n                        })}\r\n\r\n\r\n                        { /* onClick={(e) => { loginUser(e) }} */}\r\n                        {!loading ? <Button type=\"submit\" style={{ marginTop: '15px', width: 'auto', background: 'rgba(237, 28, 36, 1)', borderRadius: '3px', border: '0 none', padding: '15px 42px', fontSize: '16px', fontWeight: '500', lineHeight: '16px', cursor: 'pointer', textTransform: 'capitalize', color: 'rgba(255, 255, 255, 1)' }}>Login</Button> : <Button variant=\"primary\" style={{ marginTop: '15px', width: 'auto', background: 'rgba(237, 28, 36, 1)', borderRadius: '3px', border: '0 none', padding: '15px 42px', fontSize: '16px', fontWeight: '500', lineHeight: '16px', cursor: 'pointer', textTransform: 'capitalize', color: 'rgba(255, 255, 255, 1)' }} disabled>\r\n                            <Spinner\r\n                                as=\"span\"\r\n                                animation=\"grow\"\r\n                                size=\"sm\"\r\n                                role=\"status\"\r\n                                aria-hidden=\"true\"\r\n                            />\r\n                            Loading...\r\n                        </Button>}\r\n                        <br />\r\n                        {/* <div>OR</div>\r\n                    <div className=\"button\" onClick={() => { history.push(\"/register\") }}>Register  OR <Link to=\"/register\">Register</Link> </div>\r\n                    */}\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}